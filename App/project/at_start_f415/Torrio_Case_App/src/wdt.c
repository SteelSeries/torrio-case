/*************************************************************************************************
 *                                         INCLUDES                                              *
 *************************************************************************************************/
#include "wdt.h"
/*************************************************************************************************
 *                                  LOCAL MACRO DEFINITIONS                                      *
 *************************************************************************************************/
#define WDT_RLD_MAX_VALUE 0x0FFF // Max reload value for 12-bit WDT_RLD register

/*************************************************************************************************
 *                                  LOCAL TYPE DEFINITIONS                                       *
 *************************************************************************************************/
/*************************************************************************************************
 *                                GLOBAL VARIABLE DEFINITIONS                                    *
 *************************************************************************************************/
/*************************************************************************************************
 *                                STATIC VARIABLE DEFINITIONS                                    *
 *************************************************************************************************/
/*************************************************************************************************
 *                                STATIC FUNCTION DECLARATIONS                                   *
 *************************************************************************************************/
/*************************************************************************************************
 *                                GLOBAL FUNCTION DEFINITIONS                                    *
 *************************************************************************************************/
void Wdt_Init(void)
{
    if (crm_flag_get(CRM_WDT_RESET_FLAG) != RESET)
    {
        /* reset from wdt */
        crm_flag_clear(CRM_WDT_RESET_FLAG);
    }

    /* disable register write protection */
    wdt_register_write_enable(TRUE);

    /* set the wdt divider value */
    wdt_divider_set(WDT_CLK_DIV_256);

    /* set reload value

     timeout = reload_value * (divider / lick_freq )

     lick_freq    = 40000 Hz
     divider      = 256
     reload_value = 0xFFF(Max Value)

     timeout = 0xFFF * (256 / 40000 ) = 26214.4ms
    */
    wdt_reload_value_set(WDT_RLD_MAX_VALUE);

    /* reload wdt counter */
    wdt_counter_reload();
}

void Wdt_Enable(void)
{
    /* enable wdt */
    wdt_enable();
    DEBUG_PRINT("set wdt enable\n");
}

void Wdt_CountReset(void)
{
    wdt_counter_reload();
}
/*************************************************************************************************
 *                                STATIC FUNCTION DEFINITIONS                                    *
 *************************************************************************************************/